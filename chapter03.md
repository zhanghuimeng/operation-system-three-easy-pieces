# 关于虚拟化的对话

**教授**：现在我们进入了操作系统的三个部分中的第一部分：**虚拟化**。

**学生**：但是，高贵的教授，虚拟化到底是什么呢？

**教授**：想象我们有一个桃子。

**学生**：一个桃子？（怀疑地）

**教授**：对，一个桃子。不妨称之为**物理**桃子。然而，有很多食客都想要吃这个桃子。我们希望能够给每个食客拿一个属于他们自己的桃子，这样他们就会很高兴。我们把每个食客自己的桃子称为**虚拟**桃子；我们通过某种方法，用一个物理桃子创造出许多虚拟桃子。最重要的是，在这种错觉中，每个食客都以为自己拥有一个物理桃子，但实际上并不是这样。

**学生**：所以你们在不知情的情况下共享了同一个桃子？

**教授**：对！就是这样。

**学生**：但只有一个桃子啊。

**教授**：是啊，所以呢？

**学生**：哦，如果我和别人共享一个桃子，我想我会注意到的。

**教授**：啊，是的！好问题。但是，很多食客的情况是这样的：他们大多数时间都在打盹或者做别的事情，这时，你就可以把桃子偷走，然后拿给别人一会儿。这样就造成了有很多虚拟桃子的假象，人人可得一桃！

**学生**：听起来像一句糟糕的竞选口号。你说的是计算机，对吧，教授？

**教授**：啊，年轻的学习者，你想要的是一个更具体的例子。好主意！让我们考虑CPU这一最基本的资源。假设一个系统中只有一个物理CPU（虽然现在经常有两个以上的CPU了）。虚拟化的作用就是，把这个物理CPU包装成很多个虚拟CPU，每个系统上的应用都有一个。虽然每个应用都认为它拥有自己的CPU，但实际上只有一个。这样，操作系统就创造了一个优美的幻象：它将CPU虚拟化了。

**学生**：哇！这听上去简直像是魔法。请再多讲一些！这是如何工作的？

**教授**：早晚会讲的，年轻的学生，而且很快就会。你似乎已经准备好开始听讲了。

**学生**：我准备好了！哎，其实还没有。我不得不承认，我有点担心，您又要讲起桃子来了……

**教授**：不必太担心，我甚至都不喜欢吃桃子。现在，让我们开始吧……
